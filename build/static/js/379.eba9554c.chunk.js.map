{"version":3,"file":"static/js/379.eba9554c.chunk.js","mappings":"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","sources":["views/useTicketList/useTicketList.js","../node_modules/file-saver/src/FileSaver.js"],"sourcesContent":["/* eslint-disable react-hooks/rules-of-hooks */\n/* eslint-disable react/jsx-no-undef */\nimport React, { useEffect, useState } from 'react'\nimport {\n  CButton,\n  CCardHeader,\n  CCol,\n  CForm,\n  CFormInput,\n  CFormLabel,\n  CRow,\n  CTable,\n  CTableBody,\n  CTableDataCell,\n  CTableHead,\n  CTableHeaderCell,\n  CTableRow,\n} from '@coreui/react'\nimport axios from 'axios'\nimport { useRecoilState } from 'recoil'\nimport { jwtRecoilState, severURLRecoilState } from 'src/recoil'\nimport * as FileSaver from 'file-saver'\nimport * as XLSX from 'xlsx'\n\nconst useTicketList = () => {\n  const [IP, setIP] = useRecoilState(severURLRecoilState)\n  const [jwt, setJwt] = useRecoilState(jwtRecoilState)\n  const [loading, setLoading] = useState(false)\n  const [error, setError] = useState(null)\n\n  const [useData, setUseData] = useState(null)\n  const [page, setPage] = useState(1)\n  const [maxPage, setMaxPage] = useState(1)\n\n  const [phoneNumber, setPhoneNumber] = useState('')\n\n  const [userIdx, setUserIdx] = useState('')\n  const [userId, setUserId] = useState('')\n  const [userName, setUserName] = useState('')\n  const [userDate, setUseDate] = useState('')\n  useEffect(() => {\n    setJwt(localStorage.getItem('jwt-token'))\n  }, [])\n\n  useEffect(() => {\n    getUsers()\n  }, [jwt, page])\n\n  useEffect(() => {\n    if (useData != null && useData.length != 0) {\n      setUserIdx(useData[0].idx)\n      setUserId(useData[0].id)\n      setUserName(useData[0].userName)\n      setUseDate(useData[0].useDate)\n    } else {\n      setUserIdx()\n      setUserId('')\n      setUserName('')\n      setUseDate('')\n    }\n  }, [useData])\n\n  const getUsers = async () => {\n    setLoading(true)\n    try {\n      // 요청이 시작 할 때에는 error 와 users 를 초기화하고\n      setError(null)\n      // loading 상태를 true 로 바꿉니다.\n      setLoading(true)\n\n      const response = await axios\n        .get(`${IP}/mealtickets/used?page=${page}`, {\n          headers: {\n            'x-access-token': localStorage.getItem('jwt-token'),\n          },\n        })\n        .then((response) => {\n          if (response.data.code === 1000) {\n            setUseData(response.data.result.mealTickets)\n            if (response.data.result.totalCount % 20 > 0) {\n              setMaxPage(parseInt(response.data.result.totalCount / 20) + 1)\n            } else {\n              setMaxPage(parseInt(response.data.result.totalCount / 20))\n            }\n          }\n        })\n        .catch((error) => {})\n    } catch (e) {\n      setError(e)\n    }\n    setLoading(false)\n    // loading 끄기\n  }\n\n  const pageMinus = () => {\n    if (page - 1 === 0) {\n      alert('첫 페이지 입니다.')\n    } else {\n      setPage(page - 1)\n    }\n  }\n\n  const pagePlus = () => {\n    if (page + 1 > maxPage) {\n      alert('마지막 페이지 입니다.')\n    } else {\n      setPage(page + 1)\n    }\n  }\n\n  const columns = [\n    {\n      key: 'idx',\n      label: '사용번호',\n      _props: {\n        scope: 'col',\n      },\n    },\n    {\n      key: 'userName',\n      label: '이름',\n      _props: {\n        scope: 'col',\n      },\n    },\n    {\n      key: 'mealTypeName',\n      label: '사용메뉴',\n      _props: {\n        scope: 'col',\n      },\n    },\n    {\n      key: 'usedDate',\n      label: '사용날짜',\n      _props: {\n        scope: 'col',\n      },\n    },\n  ]\n\n  return (\n    <div>\n      <CForm>\n        <CCardHeader>\n          <strong>식권 사용 내역 조회하기</strong>\n        </CCardHeader>\n        <CRow>\n          <CTable columns={columns} items={useData} striped hover></CTable>\n        </CRow>\n        {maxPage > 1 && (\n          <div>\n            <CButton type=\"button\" onClick={pageMinus}>\n              이전\n            </CButton>\n            <span> </span>\n            <CButton type=\"button\" onClick={pagePlus}>\n              다음\n            </CButton>\n          </div>\n        )}\n      </CForm>\n    </div>\n  )\n}\n\nexport default useTicketList\n","/*\n* FileSaver.js\n* A saveAs() FileSaver implementation.\n*\n* By Eli Grey, http://eligrey.com\n*\n* License : https://github.com/eligrey/FileSaver.js/blob/master/LICENSE.md (MIT)\n* source  : http://purl.eligrey.com/github/FileSaver.js\n*/\n\n// The one and only way of getting global scope in all environments\n// https://stackoverflow.com/q/3277182/1008999\nvar _global = typeof window === 'object' && window.window === window\n  ? window : typeof self === 'object' && self.self === self\n  ? self : typeof global === 'object' && global.global === global\n  ? global\n  : this\n\nfunction bom (blob, opts) {\n  if (typeof opts === 'undefined') opts = { autoBom: false }\n  else if (typeof opts !== 'object') {\n    console.warn('Deprecated: Expected third argument to be a object')\n    opts = { autoBom: !opts }\n  }\n\n  // prepend BOM for UTF-8 XML and text/* types (including HTML)\n  // note: your browser will automatically convert UTF-16 U+FEFF to EF BB BF\n  if (opts.autoBom && /^\\s*(?:text\\/\\S*|application\\/xml|\\S*\\/\\S*\\+xml)\\s*;.*charset\\s*=\\s*utf-8/i.test(blob.type)) {\n    return new Blob([String.fromCharCode(0xFEFF), blob], { type: blob.type })\n  }\n  return blob\n}\n\nfunction download (url, name, opts) {\n  var xhr = new XMLHttpRequest()\n  xhr.open('GET', url)\n  xhr.responseType = 'blob'\n  xhr.onload = function () {\n    saveAs(xhr.response, name, opts)\n  }\n  xhr.onerror = function () {\n    console.error('could not download file')\n  }\n  xhr.send()\n}\n\nfunction corsEnabled (url) {\n  var xhr = new XMLHttpRequest()\n  // use sync to avoid popup blocker\n  xhr.open('HEAD', url, false)\n  try {\n    xhr.send()\n  } catch (e) {}\n  return xhr.status >= 200 && xhr.status <= 299\n}\n\n// `a.click()` doesn't work for all browsers (#465)\nfunction click (node) {\n  try {\n    node.dispatchEvent(new MouseEvent('click'))\n  } catch (e) {\n    var evt = document.createEvent('MouseEvents')\n    evt.initMouseEvent('click', true, true, window, 0, 0, 0, 80,\n                          20, false, false, false, false, 0, null)\n    node.dispatchEvent(evt)\n  }\n}\n\n// Detect WebView inside a native macOS app by ruling out all browsers\n// We just need to check for 'Safari' because all other browsers (besides Firefox) include that too\n// https://www.whatismybrowser.com/guides/the-latest-user-agent/macos\nvar isMacOSWebView = _global.navigator && /Macintosh/.test(navigator.userAgent) && /AppleWebKit/.test(navigator.userAgent) && !/Safari/.test(navigator.userAgent)\n\nvar saveAs = _global.saveAs || (\n  // probably in some web worker\n  (typeof window !== 'object' || window !== _global)\n    ? function saveAs () { /* noop */ }\n\n  // Use download attribute first if possible (#193 Lumia mobile) unless this is a macOS WebView\n  : ('download' in HTMLAnchorElement.prototype && !isMacOSWebView)\n  ? function saveAs (blob, name, opts) {\n    var URL = _global.URL || _global.webkitURL\n    var a = document.createElement('a')\n    name = name || blob.name || 'download'\n\n    a.download = name\n    a.rel = 'noopener' // tabnabbing\n\n    // TODO: detect chrome extensions & packaged apps\n    // a.target = '_blank'\n\n    if (typeof blob === 'string') {\n      // Support regular links\n      a.href = blob\n      if (a.origin !== location.origin) {\n        corsEnabled(a.href)\n          ? download(blob, name, opts)\n          : click(a, a.target = '_blank')\n      } else {\n        click(a)\n      }\n    } else {\n      // Support blobs\n      a.href = URL.createObjectURL(blob)\n      setTimeout(function () { URL.revokeObjectURL(a.href) }, 4E4) // 40s\n      setTimeout(function () { click(a) }, 0)\n    }\n  }\n\n  // Use msSaveOrOpenBlob as a second approach\n  : 'msSaveOrOpenBlob' in navigator\n  ? function saveAs (blob, name, opts) {\n    name = name || blob.name || 'download'\n\n    if (typeof blob === 'string') {\n      if (corsEnabled(blob)) {\n        download(blob, name, opts)\n      } else {\n        var a = document.createElement('a')\n        a.href = blob\n        a.target = '_blank'\n        setTimeout(function () { click(a) })\n      }\n    } else {\n      navigator.msSaveOrOpenBlob(bom(blob, opts), name)\n    }\n  }\n\n  // Fallback to using FileReader and a popup\n  : function saveAs (blob, name, opts, popup) {\n    // Open a popup immediately do go around popup blocker\n    // Mostly only available on user interaction and the fileReader is async so...\n    popup = popup || open('', '_blank')\n    if (popup) {\n      popup.document.title =\n      popup.document.body.innerText = 'downloading...'\n    }\n\n    if (typeof blob === 'string') return download(blob, name, opts)\n\n    var force = blob.type === 'application/octet-stream'\n    var isSafari = /constructor/i.test(_global.HTMLElement) || _global.safari\n    var isChromeIOS = /CriOS\\/[\\d]+/.test(navigator.userAgent)\n\n    if ((isChromeIOS || (force && isSafari) || isMacOSWebView) && typeof FileReader !== 'undefined') {\n      // Safari doesn't allow downloading of blob URLs\n      var reader = new FileReader()\n      reader.onloadend = function () {\n        var url = reader.result\n        url = isChromeIOS ? url : url.replace(/^data:[^;]*;/, 'data:attachment/file;')\n        if (popup) popup.location.href = url\n        else location = url\n        popup = null // reverse-tabnabbing #460\n      }\n      reader.readAsDataURL(blob)\n    } else {\n      var URL = _global.URL || _global.webkitURL\n      var url = URL.createObjectURL(blob)\n      if (popup) popup.location = url\n      else location.href = url\n      popup = null // reverse-tabnabbing #460\n      setTimeout(function () { URL.revokeObjectURL(url) }, 4E4) // 40s\n    }\n  }\n)\n\n_global.saveAs = saveAs.saveAs = saveAs\n\nif (typeof module !== 'undefined') {\n  module.exports = saveAs;\n}\n"],"names":["useRecoilState","severURLRecoilState","IP","jwtRecoilState","jwt","setJwt","useState","setLoading","setError","useData","setUseData","page","setPage","maxPage","setMaxPage","setUserIdx","setUserId","setUserName","setUseDate","useEffect","localStorage","getItem","getUsers","length","idx","id","userName","useDate","axios","headers","then","response","data","code","result","mealTickets","totalCount","parseInt","catch","error","columns","key","label","_props","scope","items","striped","hover","type","onClick","alert","b","a","autoBom","console","warn","test","Blob","c","d","XMLHttpRequest","open","responseType","onload","g","onerror","send","status","e","dispatchEvent","MouseEvent","document","createEvent","initMouseEvent","window","f","self","global","navigator","userAgent","saveAs","HTMLAnchorElement","prototype","h","i","URL","webkitURL","j","createElement","name","download","rel","href","origin","location","target","createObjectURL","setTimeout","revokeObjectURL","msSaveOrOpenBlob","title","body","innerText","HTMLElement","safari","FileReader","k","onloadend","replace","readAsDataURL","l","m","module","exports"],"sourceRoot":""}